        function in_point(x1,y1,r,x,y) {
            return((x1 - x)*(x1 - x) + (y1 - y)*(y1 - y) < r*r)
        }
        
        function init() {
            var canvas = document.getElementById("myCanvas");
            canvas.addEventListener("mousemove", doMouseMove, false);
            draw_stuff();
        }
        
        function draw_stuff() {
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");
            ctx.clearRect(canvas_xmin,canvas_ymin, canvas_xmax-canvas_xmin, 
                canvas_ymax-canvas_ymin);
            ctx.fillStyle = "white";
            ctx.fillRect(canvas_xmin,canvas_ymin, canvas_xmax-canvas_xmin, 
                canvas_ymax-canvas_ymin);
            // draw points
            for (i=0; i<npoints; i++) {
                ctx.beginPath();
                ctx.arc(x[i],y[i],r,2*Math.PI,false);
                if (active_point & selected_index == i) {
                    ctx.fillStyle = "red";
                    ctx.fill();
                }
                else {
                    ctx.strokeStyle = "black";
                    ctx.stroke();
                }
                ctx.stroke();
            }
